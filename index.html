<html>
  <head>
    <title>scown-nw-osc</title>
    <link rel="stylesheet" href="css/main.css">
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <ul class="navbar">
      <li id='a'><a>Option A</a>
      <li id='b'><a>Option B</a>
      <li id='c'><a>Option C</a>
      <li id='d'><a>Option D</a>
    </ul>
    <script>
      var gui = require('nw.gui');
      var osc = require('node-osc');
      var menu = new gui.Menu();

      var client = new osc.Client('127.0.0.1', 12346);

      var oscServer = new osc.Server(12346, '0.0.0.0');
      oscServer.on("/drop", function (msg, rinfo) {
            var element = document.createElement('div');
            element.appendChild(document.createTextNode(msg[0] + ', ' + msg[1]));
            document.body.appendChild(element);
      });

      menu.append(new gui.MenuItem({
        label: 'Click Me',
        click: function() {
          var element = document.createElement('div');
          element.appendChild(document.createTextNode('Clicked OK'));
          document.body.appendChild(element);
          client.send('/drop', 200);
        }
        }));

      document.body.addEventListener('contextmenu', function(ev) {
        ev.preventDefault();
        menu.popup(ev.x, ev.y);
        return false;
      }, false);

      var handleClickA = function (event) {
        client.send('/drop', 100);
      };

      var handleClickB = function (event) {
        client.send('/drop', 200);
      };

      var handleClickC = function (event) {
        client.send('/drop', 300);
      };

      var handleClickD = function (event) {
        client.send('/drop', 400);
      };

      var buttonA = document.getElementById('a');
      var buttonB = document.getElementById('b');
      var buttonC = document.getElementById('c');
      var buttonD = document.getElementById('d');
      buttonA.addEventListener('click', handleClickA);
      buttonB.addEventListener('click', handleClickB);
      buttonC.addEventListener('click', handleClickC);
      buttonD.addEventListener('click', handleClickD);
    </script>
  </body>
</html>
